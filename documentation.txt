app.py

Arquivo principal que roda no Streamlit.

Monta a interface de chat e gerencia o estado da conversa.

Recebe a pergunta, cria o prompt, chama o modelo LLaMA, extrai e ajusta a SQL.

Valida e executa a consulta no SQL Server.

Mostra resultados e permite feedback ğŸ‘/ğŸ‘, salvando em arquivos de log.

core/config.py

Centraliza configuraÃ§Ãµes e variÃ¡veis de ambiente.

Servidor, banco, driver ODBC.

Host/porta e parÃ¢metros do LLaMA.

Ano padrÃ£o (2025) e opÃ§Ãµes de interface (ex.: esconder SQL).

Caminhos e inicializaÃ§Ã£o dos arquivos de feedback.

core/rules.py

Define as regras de negÃ³cio e mapeamentos.

Lista oficial de plantas e estados.

SCHEMA_INFO com descriÃ§Ãµes das colunas da Ãºnica tabela usada (BI_PEDIDOS_LAB).

Mapeia palavras-chave para colunas:

â€œvalorâ€ â†’ VALOR_TOTAL

â€œvolume/mÂ²â€ â†’ AREA_VENDIDA

â€œpeso/kgâ€ â†’ PESO_ENTREGUE

â€œclienteâ€ â†’ NOME_CLI

Regras gerais para gerar SQL (apenas SELECT/CTE, usar CTEs, etc).

core/examples.py

Conjunto de poucos exemplos de perguntaâ†’SQL.

Ensina o modelo a lidar com casos importantes, como:

InterseÃ§Ã£o de clientes entre plantas usando JOIN.

ExclusÃµes por nome de cliente com NOT LIKE.

Ajuda a orientar a LLaMA a gerar SQL consistente e correta.